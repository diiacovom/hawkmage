# Hawkmage

A simple public app that generates a StackHawk `stackhawk.yml` file using OpenAI.
For a detailed look at how the application is intended to be deployed and
operated, see [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md).

## Setup

1. Install dependencies
   ```bash
   npm install
   ```

2. Initialize Amplify and add the API and Lambda function
   ```bash
   amplify init
   amplify add api # REST - path: /generate-yaml
   amplify push
   ```

3. Start the React app
   ```bash
   npm start
   ```

The Lambda function in `amplify/backend/function/generateYamlFunction` uses the OpenAI API via an API key stored in the environment variable `OPENAI_API_KEY`.

The React frontend posts form data to `/generate-yaml` and displays the YAML generated by OpenAI.

## CloudFormation Resources

A CloudFormation template (`cloudformation.yaml`) is provided to deploy a Python Lambda function and a DynamoDB table for storing form submissions alongside the responses returned from OpenAI. The template expects the Lambda code to be uploaded to S3 and requires the following parameters:

- `CodeS3Bucket` – S3 bucket containing the deployment package
- `CodeS3Key` – key of the package in the bucket
- `OpenAIApiKey` – your OpenAI API key

The Lambda handler code is in `lambda/GPT.py` and shows how the form data is sent to the OpenAI API and persisted to DynamoDB.
